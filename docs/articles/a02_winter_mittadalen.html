<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Winter conditions in Mittådalen sameby • witch</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Winter conditions in Mittådalen sameby">
<meta property="og:description" content="witch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">witch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_witch_start.html">Starting with witch: winter conditions and characterization</a>
    </li>
    <li>
      <a href="../articles/a02_winter_mittadalen.html">Winter conditions in Mittådalen sameby</a>
    </li>
    <li>
      <a href="../articles/a03_winter_tassasen.html">Winter conditions in Tåssåsen sameby</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="a02_winter_mittadalen_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="a02_winter_mittadalen_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="a02_winter_mittadalen_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Winter conditions in Mittådalen sameby</h1>
                        <h4 class="author">Bernardo Brandão Niebuhr</h4>
            
            <h4 class="date">2020-11-27</h4>
      
      
      <div class="hidden name"><code>a02_winter_mittadalen.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Here we explore the winter conditions in different years for Mittådalen sameby using the package <code>witch</code>. The data are from Myskelåsen weather station (snow depth) and Dravagen weather station (precipitation and temperature). Let’s first plot the precipitation and snow depth in each year of data, to see how it looks like.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://forcats.tidyverse.org">forcats</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">witch</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">weather_mittadalen</span><span class="op">)</span>

<span class="co"># plot </span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_mittadalen</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">year</span>, scales <span class="op">=</span> <span class="st">"free_x"</span>, ncol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">snow_depth</span>, color <span class="op">=</span> <span class="st">"Snow depth (mm)"</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">prec</span>, color <span class="op">=</span> <span class="st">"Precipitation (mm)"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">""</span>, color <span class="op">=</span> <span class="st">"Measure"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></code></pre></div>
<p><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-1-1.png" width="960" style="display: block; margin: auto;"></p>
<p>Maybe plotting cumulative precipitation and snow depth is better. To do so, we use the function <code>analyse_weather()</code> to calculate it and plot it. We also add events of ice crust formation of type 3. To put all plots in the same figure, we use the function <code><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange()</a></code> from the <code>ggpubr</code> package. The blue lines represent ice crust formation events type 3, sensu Lundqvist et al. (2007).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a></span><span class="op">)</span>

<span class="co"># calculate winter parameters and plot</span>
<span class="va">weather_years</span> <span class="op">&lt;-</span> <span class="va">weather_mittadalen</span> <span class="op">%&gt;%</span>
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">nest</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">snow_depth</span>, <span class="va">prec</span>, <span class="va">temp_min</span>, <span class="va">temp_max</span>, <span class="va">temp_avg</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    winter_conditions <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="../reference/analyze_weather.html">analyze_weather</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">snow_depth</span>, <span class="va">prec</span>, <span class="va">temp_min</span>, <span class="va">temp_max</span>, <span class="va">temp_avg</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
    winter_plots <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html">map2</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="va">year</span>, <span class="op">~</span> <span class="fu"><a href="../reference/plot_weather.html">plot_weather</a></span><span class="op">(</span><span class="va">.x</span>, term <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"snow_de"</span>, <span class="st">"cum"</span><span class="op">)</span>, add_events <span class="op">=</span> <span class="st">"events3"</span>,
                                                                title <span class="op">=</span> <span class="va">.y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># combine plots</span>
<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span>plotlist <span class="op">=</span> <span class="va">weather_years</span><span class="op">$</span><span class="va">winter_plots</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">5</span>, common.legend <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-2-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
<div id="looking-at-each-winter-closely" class="section level1">
<h1 class="hasAnchor">
<a href="#looking-at-each-winter-closely" class="anchor"></a>Looking at each winter closely</h1>
<p>To look at each winter closely, we plot, for each, cumulative precipitation (in m), snow depth (in m), the ratio between cumulative precipitation and snow depth, and the dates of ice crust events 3 and 4. The dashed vertical lines are the dates of events 3 (blue) and 4 (red). The horizontal line is the reference for when cumulative precipitation and snow depth are similar.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plot </span>
<span class="va">weather_years</span> <span class="op">&lt;-</span> <span class="va">weather_years</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>winter_plots2 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html">map2</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="va">year</span>, 
                                           <span class="op">~</span> <span class="fu"><a href="../reference/plot_weather.html">plot_weather</a></span><span class="op">(</span><span class="va">.x</span>, term <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"snow_de"</span>, <span class="st">"cum"</span>, <span class="st">"prec_snow_ratio"</span><span class="op">)</span>, 
                                                          factor_mult <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.01</span>, <span class="fl">1</span><span class="op">)</span>,
                                                          add_events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"events3"</span>, <span class="st">"events4"</span><span class="op">)</span>, title <span class="op">=</span> <span class="va">.y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>


<span class="co"># for each year</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">weather_years</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># plot</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>
    <span class="va">weather_years</span><span class="op">$</span><span class="va">winter_plots2</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-2.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-3.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-4.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-5.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-6.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-7.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-8.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-9.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-10.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-11.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-12.png" width="576" style="display: block; margin: auto;"><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-3-13.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="ice-crust-events-and-reindeer-herders-classification-of-winter-conditions" class="section level1">
<h1 class="hasAnchor">
<a href="#ice-crust-events-and-reindeer-herders-classification-of-winter-conditions" class="anchor"></a>Ice crust events and reindeer herders classification of winter conditions</h1>
<p>Here we plot both the herders classification of the winters conditions (as “bad”, “medium”, or “good”) and the number of events 3 and 4 we have in each year, in the first half of the winter. The bars represent the herders’ classification of weather conditions and the vertical lines represent the years when the construction of the wind industrial park in Glötesvålen started and ended.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read expert knowledge data from herders</span>
<span class="va">winter_herders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/details_winters_mittadalen.csv"</span>, package <span class="op">=</span> <span class="st">"witch"</span><span class="op">)</span>, stringsAsFactors <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"good_bad_winter"</span>, <span class="st">"snow"</span>, <span class="st">"construction"</span><span class="op">)</span>, <span class="va">as.factor</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="va"><a href="http://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">winter</span>, weather <span class="op">=</span> <span class="va">good_bad_winter</span>, <span class="va">construction</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>weather <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">weather</span>, <span class="st">"good"</span>, after <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> 

<span class="co"># calculate ice crust events</span>
<span class="va">weather_years</span> <span class="op">&lt;-</span> <span class="va">weather_years</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    n_days3 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="op">~</span> <span class="fu"><a href="../reference/analyze_weather.html">n_days</a></span><span class="op">(</span><span class="va">.</span>, event <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,
    n_days4 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="op">~</span> <span class="fu"><a href="../reference/analyze_weather.html">n_days</a></span><span class="op">(</span><span class="va">.</span>, event <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,
    n_events3 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="op">~</span> <span class="fu"><a href="../reference/analyze_weather.html">n_events</a></span><span class="op">(</span><span class="va">.</span>, event <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,
    n_events4 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="op">~</span> <span class="fu"><a href="../reference/analyze_weather.html">n_events</a></span><span class="op">(</span><span class="va">.</span>, event <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,
    duration3 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="op">~</span> <span class="fu"><a href="../reference/analyze_weather.html">duration_event</a></span><span class="op">(</span><span class="va">.</span>, event <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,
    duration4 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">winter_conditions</span>, <span class="op">~</span> <span class="fu"><a href="../reference/analyze_weather.html">duration_event</a></span><span class="op">(</span><span class="va">.</span>, event <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span><span class="va">n_days3</span><span class="op">:</span><span class="va">n_events4</span><span class="op">)</span>

<span class="co"># plot ice events and herders' classification</span>
<span class="va">weather_years</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">n_events3</span><span class="op">:</span><span class="va">n_events4</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">n_events3</span><span class="op">:</span><span class="va">n_events4</span>, names_to <span class="op">=</span> <span class="st">"what"</span>, values_to <span class="op">=</span> <span class="st">"val"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">val</span>, color <span class="op">=</span> <span class="va">what</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">winter</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">weather</span><span class="op">)</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">winter_herders</span>, inherit.aes <span class="op">=</span> <span class="cn">F</span>, 
           fill <span class="op">=</span> <span class="st">"grey60"</span>, stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html">first</a></span><span class="op">(</span><span class="va">winter_herders</span><span class="op">$</span><span class="va">winter</span><span class="op">[</span><span class="va">winter_herders</span><span class="op">$</span><span class="va">construction</span> <span class="op">==</span> <span class="st">"during"</span><span class="op">]</span> <span class="op">-</span> <span class="fl">0.5</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="fl">2</span>, size <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html">first</a></span><span class="op">(</span><span class="va">winter_herders</span><span class="op">$</span><span class="va">winter</span><span class="op">[</span><span class="va">winter_herders</span><span class="op">$</span><span class="va">construction</span> <span class="op">==</span> <span class="st">"after"</span><span class="op">]</span> <span class="op">-</span> <span class="fl">0.5</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="fl">2</span>, size <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Weather conditions"</span>,
                     breaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">winter_herders</span><span class="op">$</span><span class="va">weather</span><span class="op">)</span>,
                     sec.axis <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">dup_axis</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Number of events"</span>, 
                                          labels <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
<p><img src="a02_winter_mittadalen_files/figure-html/unnamed-chunk-4-1.png" width="576" style="display: block; margin: auto;"></p>
<p>In a first look, there does not seem to be a clear relationship between the number of ice crust events in the first half of the winter and “how bad it was” according to the herders. We can also visualize that in a table.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">winter_herders</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span>
    <span class="va">weather_years</span> <span class="op">%&gt;%</span>
      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">n_events3</span><span class="op">:</span><span class="va">n_events4</span><span class="op">)</span>,
    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"winter"</span> <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">winter</th>
<th align="left">weather</th>
<th align="left">construction</th>
<th align="right">n_events3</th>
<th align="right">n_events4</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2008</td>
<td align="left">medium</td>
<td align="left">before</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">NA</td>
<td align="left">before</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">good</td>
<td align="left">before</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2011</td>
<td align="left">good</td>
<td align="left">before</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2012</td>
<td align="left">medium</td>
<td align="left">during</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="left">medium</td>
<td align="left">during</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="left">bad</td>
<td align="left">during</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2015</td>
<td align="left">bad</td>
<td align="left">after</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2016</td>
<td align="left">bad</td>
<td align="left">after</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="left">bad</td>
<td align="left">after</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">2018</td>
<td align="left">bad/medium</td>
<td align="left">after</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="left">medium</td>
<td align="left">after</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2020</td>
<td align="left">bad</td>
<td align="left">after</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># winter_herders %&gt;% </span>
<span class="co">#   dplyr::left_join(</span>
<span class="co">#     weather_years %&gt;%</span>
<span class="co">#       dplyr::select(year, n_events3:n_events4),</span>
<span class="co">#     by = c("winter" = "year")</span>
<span class="co">#   ) %&gt;% </span>
<span class="co">#   dplyr::group_by(weather) %&gt;% </span>
<span class="co">#   summarize(mean3 = mean(n_events3),</span>
<span class="co">#             mean4 = mean(n_events4))</span></code></pre></div>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<p>Lundqvist, H., Norell, L., Danel, O. 2007. Multivariate characterisation of environmental conditions for reindeer husbandry in Sweden. Rangifer, 27(1): 5-23.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bernardo Niebuhr, Anna Skarin, Per Sandström.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
